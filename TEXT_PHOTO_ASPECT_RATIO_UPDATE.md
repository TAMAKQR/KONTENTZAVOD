# üìê Text+Photo: –î–æ–±–∞–≤–ª–µ–Ω –≤—ã–±–æ—Ä —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å—Ç–æ—Ä–æ–Ω

## üéØ –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–†–µ–∂–∏–º **Text+Photo** —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–µ–∂–∏–º **Text**:

1. ‚úÖ –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏
2. ‚úÖ **[–ù–û–í–û–ï]** –í—ã–±–æ—Ä —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å—Ç–æ—Ä–æ–Ω (16:9, 9:16, 1:1)
3. ‚úÖ –í–≤–æ–¥ –ø—Ä–æ–º—Ç–∞
4. ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ (–ø–æ–æ—á–µ—Ä–µ–¥–Ω–æ –ø–æ —Å—Ü–µ–Ω–∞–º)
5. ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –ù–æ–≤–æ–µ FSM —Å–æ—Å—Ç–æ—è–Ω–∏–µ (—Å—Ç—Ä–æ–∫–∞ 33)

```python
text_photo_choosing_aspect_ratio = State()  # –í—ã–±–æ—Ä —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å—Ç–æ—Ä–æ–Ω
```

### 2. –ò–∑–º–µ–Ω–µ–Ω callback handler –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –º–æ–¥–µ–ª–∏ (—Å—Ç—Ä–æ–∫–∏ 571-605)

**–î–û:** –ü–µ—Ä–µ—Ö–æ–¥ —Å—Ä–∞–∑—É –∫ `text_photo_waiting_prompt`
**–°–¢–ê–õ–û:** –ü–µ—Ä–µ—Ö–æ–¥ –∫ `text_photo_choosing_aspect_ratio` —Å –≤—ã–±–æ—Ä–æ–º —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å—Ç–æ—Ä–æ–Ω

```python
# –ù–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏
[InlineKeyboardButton(text="üì∫ 16:9 (YouTube/Desktop)", callback_data="aspect_16_9_text_photo")],
[InlineKeyboardButton(text="üì± 9:16 (TikTok/Shorts) ‚≠ê", callback_data="aspect_9_16_text_photo")],
[InlineKeyboardButton(text="‚¨ú 1:1 (Instagram Feed)", callback_data="aspect_1_1_text_photo")],
```

### 3. –ù–æ–≤—ã–π callback handler (—Å—Ç—Ä–æ–∫–∏ 174-210)

```python
@router.callback_query(lambda c: c.data.startswith("aspect_") and c.data.endswith("_text_photo"))
async def choose_text_photo_aspect_ratio(callback, state):
    """–í—ã–±–æ—Ä —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å—Ç–æ—Ä–æ–Ω –¥–ª—è —Ä–µ–∂–∏–º–∞ –¢–µ–∫—Å—Ç+–§–æ—Ç–æ"""
```

### 4. –£–±—Ä–∞–Ω–æ —Å—Ç–∞—Ä–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (—Å—Ç—Ä–æ–∫–∞ 658-667)

**–î–û:** "–ó–∞–ø—Ä–æ—Å –ø—Ä–∏–Ω—è—Ç: ... üì§ –¢–µ–ø–µ—Ä—å –æ—Ç–ø—Ä–∞–≤—å —Ñ–æ—Ç–æ:"
**–°–¢–ê–õ–û:**

```
‚úÖ –ü—Ä–æ–º—Ç –ø—Ä–∏–Ω—è—Ç!

üìπ –û–ø–∏—Å–∞–Ω–∏–µ –≤–∏–¥–µ–æ: [—Ç–µ–∫—Å—Ç]
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

üì∏ –¢–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∂–∞–π —Ñ–æ—Ç–æ –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ü–µ–Ω—ã:

1Ô∏è‚É£ –ó–∞–≥—Ä—É–∂–∞–π —Ñ–æ—Ç–æ (–æ–¥–Ω–æ –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ)
2Ô∏è‚É£ –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ—Ö —Ñ–æ—Ç–æ –Ω–∞–∂–º–∏ /–≥–æ—Ç–æ–≤–æ

üí° –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–æ—Ç–æ = –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ü–µ–Ω –≤–∏–¥–µ–æ
```

### 5. –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "/–≥–æ—Ç–æ–≤–æ" (—Å—Ç—Ä–æ–∫–∞ 654-656)

```python
keyboard = InlineKeyboardMarkup(
    inline_keyboard=[[InlineKeyboardButton(text="‚úÖ /–≥–æ—Ç–æ–≤–æ", callback_data="text_photo_ready")],
                    [InlineKeyboardButton(text="‚¨ÖÔ∏è –û—Ç–º–µ–Ω–∞", callback_data="back_to_menu")]]
)
```

### 6. –ù–æ–≤—ã–π callback handler –¥–ª—è –∫–Ω–æ–ø–∫–∏ (—Å—Ç—Ä–æ–∫–∏ 670-683)

```python
@router.callback_query(lambda c: c.data == "text_photo_ready")
async def text_photo_ready_button(callback, state):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–∫–∏ /–≥–æ—Ç–æ–≤–æ –¥–ª—è —Ä–µ–∂–∏–º–∞ –¢–µ–∫—Å—Ç+–§–æ—Ç–æ"""
```

## üé¨ –ù–æ–≤—ã–π flow

```
–†–ï–ñ–ò–ú TEXT+PHOTO:

1. –í—ã–±–æ—Ä —Ç–∏–ø–∞ ‚Üí üìù –¢–µ–∫—Å—Ç+–§–æ—Ç–æ
2. –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ ‚Üí Kling / Sora / Veo
3. [–ù–û–í–û–ï] –í—ã–±–æ—Ä —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å—Ç–æ—Ä–æ–Ω ‚Üí 16:9 / 9:16 / 1:1
4. –í–≤–æ–¥ –ø—Ä–æ–º—Ç–∞ ‚Üí "–ö—Ä–∞—Å–∏–≤—ã–π –∑–∞–∫–∞—Ç..."
5. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ ‚Üí photo1.jpg, photo2.jpg, photo3.jpg
6. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É ‚úÖ /–≥–æ—Ç–æ–≤–æ
7. –°–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç N —Å—Ü–µ–Ω –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Ñ–æ—Ç–æ
8. –ü–æ–æ—á–µ—Ä–µ–¥–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ü–µ–Ω—ã
9. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∏–¥–µ–æ
```

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ:

- [ ] –ù–µ—Ç —Å—Ç–∞—Ä–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è "üì§ –¢–µ–ø–µ—Ä—å –æ—Ç–ø—Ä–∞–≤—å —Ñ–æ—Ç–æ:" –ø—Ä–∏ –≤–≤–æ–¥–µ –ø—Ä–æ–º—Ç–∞
- [ ] –ü–æ—Å–ª–µ –≤–≤–æ–¥–∞ –ø—Ä–æ–º—Ç–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–æ—Ç–æ —Å –∫–Ω–æ–ø–∫–æ–π "/–≥–æ—Ç–æ–≤–æ"
- [ ] –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –º–æ–¥–µ–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤—ã–±–æ—Ä —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å—Ç–æ—Ä–æ–Ω
- [ ] –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å—Ç–æ—Ä–æ–Ω –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è "–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–∏–¥–µ–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã"
- [ ] –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ "/–≥–æ—Ç–æ–≤–æ" —Å–∏—Å—Ç–µ–º–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç –ø–æ–æ—á–µ—Ä–µ–¥–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É —Ñ–æ—Ç–æ
- [ ] –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ—Å–∏—Ç —Ñ–æ—Ç–æ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ (–Ω–µ –¥–≤–∞ —Ä–∞–∑–∞)

## üìä –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫

| –ß—Ç–æ                         | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | –°—Ç—Ä–æ–∫–∏        |
| --------------------------- | ---------- | ------------- |
| –ù–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ             | 1          | 33            |
| –ò–∑–º–µ–Ω–µ–Ω callback –º–æ–¥–µ–ª–∏     | 1          | 571-605       |
| –ù–æ–≤—ã–π callback aspect ratio | 1          | 174-210       |
| –ò–∑–º–µ–Ω–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–æ–º—Ç–∞   | 1          | 658-667       |
| –ù–æ–≤—ã–π callback –∫–Ω–æ–ø–∫–∏       | 1          | 670-683       |
| **–ò–¢–û–ì–û:**                  | **5**      | **~50 —Å—Ç—Ä–æ–∫** |

## üîÑ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

‚úÖ **–ü–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ** —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º:

- –§—É–Ω–∫—Ü–∏—è `start_text_photo_scene_generation()` –Ω–µ –∏–∑–º–µ–Ω–µ–Ω–∞
- –§—É–Ω–∫—Ü–∏—è `show_text_photo_scene_for_photo_upload()` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–æ—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
- –î—Ä—É–≥–∏–µ —Ä–µ–∂–∏–º—ã (Text, Text+Photo+AI) –Ω–µ –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã

## ‚úÖ –°—Ç–∞—Ç—É—Å

üü¢ **–ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ**

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–Ω–µ—Å–µ–Ω—ã, —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ—Å–∏—Ç —Ñ–æ—Ç–æ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑!
