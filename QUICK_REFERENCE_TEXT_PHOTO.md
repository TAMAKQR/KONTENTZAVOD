# üéØ Quick Reference - Text+Photo –¥–ª—è Kling

## üì¶ –ß—Ç–æ –±—ã–ª–æ —Å–æ–∑–¥–∞–Ω–æ/–æ–±–Ω–æ–≤–ª–µ–Ω–æ

### ‚úÖ 4 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–∞:

1. **image_utils.py** - –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ –Ω–∞ ImgBB
2. **TEXT_PHOTO_KLING_GUIDE.md** - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
3. **TEXT_PHOTO_IMPLEMENTATION_SUMMARY.md** - –†–µ–∑—é–º–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
4. **TEXT_PHOTO_FLOW_DIAGRAM.md** - –î–∏–∞–≥—Ä–∞–º–º—ã –ø—Ä–æ—Ü–µ—Å—Å–∞
5. **SETUP_TEXT_PHOTO_KLING.md** - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏
6. **TEXT_PHOTO_README.md** - –≠—Ç–æ—Ç —Ñ–∞–π–ª

### ‚úÖ 4 —Ñ–∞–π–ª–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–æ:

1. **video_generator.py** - –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `scene_image_urls`
2. **handlers/video_handler.py** - –§—É–Ω–∫—Ü–∏—è `start_text_photo_generation()`
3. **requirements.txt** - `aiohttp>=3.8.0`

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (3 –º–∏–Ω—É—Ç—ã)

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
pip install -r requirements.txt

# 2. –î–æ–±–∞–≤–∏—Ç—å –≤ .env
IMGBB_API_KEY=your_key

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å
python main.py
```

---

## üé¨ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç (USER FLOW)

```
/start
  ‚Üí "üìπ –°–æ–∑–¥–∞—Ç—å –≤–∏–¥–µ–æ"
    ‚Üí "üìùüñºÔ∏è –¢–µ–∫—Å—Ç + –§–æ—Ç–æ"
      ‚Üí –í—ã–±—Ä–∞—Ç—å –º–æ–¥–µ–ª—å (Kling)
        ‚Üí –í–≤–µ—Å—Ç–∏ –ø—Ä–æ–º—Ç
          ‚Üí –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ 1 ‚úÖ
          ‚Üí –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ 2 ‚úÖ
          ‚Üí –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ 3 ‚úÖ
            ‚Üí "/–≥–æ—Ç–æ–≤–æ"
              ‚Üí –û–±—Ä–∞–±–æ—Ç–∫–∞ (~12 –º–∏–Ω)
                ‚Üí –í–∏–¥–µ–æ –≥–æ—Ç–æ–≤–æ! üéâ
```

---

## üîë –ö–ª—é—á–µ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ –∫–æ–¥–µ

### –î–û (‚ùå):

```python
# –¢–æ–ª—å–∫–æ –ø–µ—Ä–≤–æ–π —Å—Ü–µ–Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–ª–æ—Å—å —Ñ–æ—Ç–æ
await generator.generate_multiple_scenes(
    scenes=scenes,
    model="kling",
    start_image_url=single_url  # ‚Üê –¢–æ–ª—å–∫–æ –ø–µ—Ä–≤–æ–π!
)
```

### –ü–û–°–õ–ï (‚úÖ):

```python
# –ö–∞–∂–¥–æ–π —Å—Ü–µ–Ω–µ —Å–≤–æ—ë —Ñ–æ—Ç–æ!
await generator.generate_multiple_scenes(
    scenes=scenes,
    model="kling",
    scene_image_urls=[url1, url2, url3]  # ‚Üê –ö–∞–∂–¥–æ–π —Å–≤–æ—ë!
)
```

---

## üìä JSON –¥–ª—è Replicate

```json
–°—Ü–µ–Ω–∞ 1: {
    "prompt": "...",
    "start_image": "https://i.ibb.co/abc123.jpg"
}

–°—Ü–µ–Ω–∞ 2: {
    "prompt": "...",
    "start_image": "https://i.ibb.co/def456.jpg"
}

–°—Ü–µ–Ω–∞ 3: {
    "prompt": "...",
    "start_image": "https://i.ibb.co/ghi789.jpg"
}
```

---

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–´–ï –ü–ê–†–ê–ú–ï–¢–†–´ KLING

| –ü–∞—Ä–∞–º–µ—Ç—Ä         | –ó–Ω–∞—á–µ–Ω–∏–µ           |
| ---------------- | ------------------ |
| **duration**     | 5 –∏–ª–∏ 10 (–¢–û–õ–¨–ö–û!) |
| **aspect_ratio** | 16:9, 9:16, 1:1    |
| **start_image**  | –ü—É–±–ª–∏—á–Ω—ã–π URL!     |
| **quality**      | –ù–ï —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!     |

---

## üõ†Ô∏è –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### image_utils.py

```python
uploader = ImageUploader()
url = await uploader.process_telegram_photo(bot, file_id, "scene_1")
# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: "https://i.ibb.co/abc123.jpg"
```

### video_generator.py

```python
result = await generator.generate_multiple_scenes(
    scenes=scenes,
    model="kling",
    scene_image_urls=[url1, url2, url3]
)
```

### handlers/video_handler.py

```python
await start_text_photo_generation(message, state, photo_file_ids)
```

---

## ‚è±Ô∏è –í—Ä–µ–º–µ–Ω–Ω–∞—è —à–∫–∞–ª–∞

```
–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ:     15 —Å–µ–∫
–ù–∞ ImgBB:          30 —Å–µ–∫
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è (‚Üî):     12 –º–∏–Ω ‚Üê –ü–ê–†–ê–õ–õ–ï–õ–¨–ù–û!
–°–∫–∞—á–∏–≤–∞–Ω–∏–µ:        2 –º–∏–Ω
–°–∫–ª–µ–∏–≤–∞–Ω–∏–µ:        1 –º–∏–Ω
–û—Ç–ø—Ä–∞–≤–∫–∞:          2 –º–∏–Ω
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–í–°–ï–ì–û:             ~12-15 –º–∏–Ω
```

> –ë–µ–∑ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞ –±—ã–ª–æ –±—ã **27+ –º–∏–Ω—É—Ç**!

---

## ‚ùå –ï—Å–ª–∏ –æ—à–∏–±–∫–∏

| –û—à–∏–±–∫–∞                        | –†–µ—à–µ–Ω–∏–µ                        |
| ----------------------------- | ------------------------------ |
| `IMGBB_API_KEY` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω | –î–æ–±–∞–≤—å—Ç–µ –≤ `.env`              |
| "Invalid start_image URL"     | ImgBB –∫–ª—é—á –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π        |
| "–û—à–∏–±–∫–∞ Telegram"             | –ò–Ω—Ç–µ—Ä–Ω–µ—Ç, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–Ω–æ–≤–æ    |
| "ModuleNotFoundError"         | `image_utils.py` –≤ `d:\VIDEO\` |

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

| –§–∞–π–ª                                 | –ö–æ–≥–¥–∞ —á–∏—Ç–∞—Ç—å                  |
| ------------------------------------ | ----------------------------- |
| TEXT_PHOTO_README.md                 | –ü–µ—Ä–≤—ã–º! –û–±–∑–æ—Ä                 |
| SETUP_TEXT_PHOTO_KLING.md            | –£—Å—Ç–∞–Ω–æ–≤–∫–∞                     |
| TEXT_PHOTO_KLING_GUIDE.md            | –ü–æ–¥—Ä–æ–±–Ω–æ (–ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –ø—Ä–∏–º–µ—Ä—ã) |
| TEXT_PHOTO_FLOW_DIAGRAM.md           | –î–∏–∞–≥—Ä–∞–º–º—ã –ø—Ä–æ—Ü–µ—Å—Å–∞            |
| TEXT_PHOTO_IMPLEMENTATION_SUMMARY.md | –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑—é–º–µ            |

---

## ‚ú® –ß—Ç–æ —Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ?

1. **IMGBB_API_KEY** - –ë–µ–∑ –Ω–µ–≥–æ –Ω–∏—á–µ–≥–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚ùå
2. **scene_image_urls** - –ù–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ü–µ–Ω—ã ‚úÖ
3. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è** - 3 —Å—Ü–µ–Ω—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ ‚ö°
4. **–ü—É–±–ª–∏—á–Ω—ã–µ URL** - ImgBB –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø üåê

---

## üéØ –ö—Ä–∞—Ç–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞
pip install -r requirements.txt

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip list | grep aiohttp

# –ó–∞–ø—É—Å–∫
python main.py

# –ü—Ä–æ–≤–µ—Ä–∫–∞ API –∫–ª—é—á–µ–π
echo $env:IMGBB_API_KEY  # PowerShell
```

---

## üìà –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

```
–î–û:
- –¢–æ–ª—å–∫–æ 1-—è —Å—Ü–µ–Ω–∞ –∏–º–µ–ª–∞ —Ñ–æ—Ç–æ
- –û—Å—Ç–∞–ª—å–Ω—ã–µ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å –±–µ–∑ —Ñ–æ—Ç–æ
- –ù–µ—Ç –ø–ª–∞–≤–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤

–ü–û–°–õ–ï:
- –í–°–ï —Å—Ü–µ–Ω—ã –∏–º–µ—é—Ç —Ñ–æ—Ç–æ
- –ö–∞–∂–¥–æ–π —Å–≤–æ—ë —Ñ–æ—Ç–æ
- –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å—Ü–µ–Ω–∞–º–∏
- –ù–∞ 6+ –º–∏–Ω—É—Ç –±—ã—Å—Ç—Ä–µ–µ –±–ª–∞–≥–æ–¥–∞—Ä—è –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º—É
```

---

## üöÄ –°—Ç–∞—Ç—É—Å

‚úÖ **Production Ready**

–í—Å–µ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–ù–∞—á–Ω–∏—Ç–µ —Å **SETUP_TEXT_PHOTO_KLING.md** ‚Üí –∑–∞—Ç–µ–º **TEXT_PHOTO_README.md**

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ  
**–î–∞—Ç–∞:** 2025
