# ๐ธ ะะพะพัะตัะตะดะฝะฐั ะทะฐะณััะทะบะฐ ัะพัะพ ะดะปั ะบะฐะถะดะพะน ััะตะฝั - ะะะะะฏ ะะะะะะะะฆะะฏ

## ๐ฏ ะะปะฐะฒะฝะฐั ะธะดะตั

ะกะธััะตะผะฐ ัะตะฟะตัั ะฟัะพัะธั ัะพัะพ **ะดะปั ะบะฐะถะดะพะน ััะตะฝั ะฟะพ ะพัะดะตะปัะฝะพััะธ**, ะฒะผะตััะพ ัะพะณะพ ััะพะฑั ััะตะฑะพะฒะฐัั ะทะฐะณััะทะธัั ะฒัะต ัะพัะพ ััะฐะทั.

### ะกัะฐััะน ะฟะพัะพะบ (ะฑัะป):

```
/ะณะพัะพะฒะพ โ ะะฐะณััะทะธัั ะะกะ ัะพัะพ โ GPT ัะพะทะดะฐะตั ััะตะฝั โ ะะพะบะฐะทะฐัั ะดะปั ะฟะพะดัะฒะตัะถะดะตะฝะธั
โ ะัะพะฑะปะตะผะฐ: ะะตะฒะพะทะผะพะถะฝะพ ะฟะพะฝััั ะบะฐะบะพะต ัะพัะพ ะดะปั ะบะฐะบะพะน ััะตะฝั!
```

### ะะพะฒัะน ะฟะพัะพะบ (ัะตะฟะตัั):

```
ะกัะตะฝะฐ 1: GPT ััะตะฝะฐัะธะน โ ๐ธ ะะฐะณััะทะธ ัะพัะพ ะดะปั ะกัะตะฝั 1 โ ะะพะปััะตะฝะพ โ
         โ
ะกัะตะฝะฐ 2: GPT ััะตะฝะฐัะธะน โ ๐ธ ะะฐะณััะทะธ ัะพัะพ ะดะปั ะกัะตะฝั 2 โ ะะพะปััะตะฝะพ โ
         โ
ะกัะตะฝะฐ 3: GPT ััะตะฝะฐัะธะน โ ๐ธ ะะฐะณััะทะธ ัะพัะพ ะดะปั ะกัะตะฝั 3 โ ะะพะปััะตะฝะพ โ
         โ
ะัะต ััะตะฝั ะณะพัะพะฒั โ ะะพะบะฐะทะฐัั ะดะปั ะฟะพะดัะฒะตัะถะดะตะฝะธั โ ะะตะฝะตัะฐัะธั ะฒะธะดะตะพ
โ ะัะพะฑะปะตะผะฐ ัะตัะตะฝะฐ: ะะฐะถะดะพะผั ัะพัะพ ัะพัะฝะพ ัะพะพัะฒะตัััะฒัะตั ััะตะฝะฐ!
```

## ๐ ะะพะฒัะต ัะพััะพัะฝะธั FSM

```python
class VideoStates(StatesGroup):
    # ะกัะฐััะต
    text_photo_waiting_prompt = State()  # ะะฒะพะด ะฟัะพะผัะฐ
    text_photo_waiting_photo = State()   # โ ะะะะฌะจะ ะะ ะะกะะะะฌะะฃะะขะกะฏ ะดะปั ะพัะฝะพะฒะฝะพะณะพ ะฟะพัะพะบะฐ

    # ะะะะซะ
    text_photo_confirming_scene_photo = State()  # โ ะะะะะ ัะพััะพัะฝะธะต
    # ะะพะบะฐะทัะฒะฐะตะผ ััะตะฝั ะธ ะฟัะพัะธะผ ัะพัะพ ะดะปั ะฝะตั

    # ะะปั ัะตะดะฐะบัะธัะพะฒะฐะฝะธั (ะฑัะปะธ)
    text_photo_generating = State()      # ะะพะดัะฒะตัะถะดะตะฝะธะต ััะตะฝ
    text_photo_editing_scene = State()   # ะะตะดะฐะบัะธัะพะฒะฐะฝะธะต ะฟัะพะผัะฐ
    text_photo_editing_scene_photo = State()  # ะะตะดะฐะบัะธัะพะฒะฐะฝะธะต ัะพัะพ
```

## ๐ ะะธะฐะณัะฐะผะผะฐ ะฝะพะฒะพะณะพ ะฟะพัะพะบะฐ

```
TELEGRAM BOT ะะะะฌะะะะะขะะะฌ
    โ
    โโ /start
    โ
    โโ ะัะฑะธัะฐะตั "๐ ะขะตะบัั+ะคะพัะพ"
    โ
    โโ ะัะฑะธัะฐะตั ะผะพะดะตะปั (Kling/Sora/Veo)
    โ
    โโ ะะธัะตั ะฟัะพะผั: "ะัะฐัะธะฒัะน ะทะฐะบะฐั ะฝะฐะด ะผะพัะตะผ"
    โ
    โโ ะัะฟัะฐะฒะปัะตั ะะะะะะ ัะพัะพ
    โโ ะัะฟัะฐะฒะปัะตั ะะขะะะะ ัะพัะพ
    โโ ะัะฟัะฐะฒะปัะตั ะขะะะขะฌะ ัะพัะพ
    โ
    โโ ะะฐะฟะธัะตั "/ะณะพัะพะฒะพ"
    โ       โ
    โ   [ะกะะกะขะะะ ะะะะะะะขะซะะะะข]
    โ   1. ะะฑัะฐะฑะพัะบะฐ ะฟัะพะผัะฐ ัะตัะตะท GPT-4
    โ   2. ะกะพะทะดะฐะฝะธะต 3 ััะตะฝ (ะฟะพ ะบะพะปะธัะตััะฒั ัะพัะพ)
    โ       โ
    โโ ะกะธััะตะผะฐ ะฟะพะบะฐะทัะฒะฐะตั ััะตะฝะฐัะธะน ะกัะตะฝั 1
    โ  "๐น ะกัะตะฝะฐ 1 ะธะท 3"
    โ  "๐ ะะฟะธัะฐะฝะธะต: ะทะฐะบะฐั ั ะฟัะธัะฐะผะธ..."
    โ  "๐ธ ะะฐะณััะทะธ ัะพัะพ ะดะปั ััะพะน ััะตะฝั!"
    โ
    โโ ะะพะปัะทะพะฒะฐัะตะปั ะทะฐะณััะถะฐะตั ัะพัะพ ะดะปั ะกัะตะฝั 1
    โ       โ
    โ   [ะกะะกะขะะะ]
    โ   - ะะฐะณััะถะฐะตั ะฝะฐ ImgBB
    โ   - ะกะพััะฐะฝัะตั URL ะฒ scene_image_urls[0]
    โ       โ
    โโ ะกะธััะตะผะฐ ะฟะพะบะฐะทัะฒะฐะตั ััะตะฝะฐัะธะน ะกัะตะฝั 2
    โ  "๐น ะกัะตะฝะฐ 2 ะธะท 3"
    โ  "๐ ะะฟะธัะฐะฝะธะต: ะทะฐะบะฐั ะฟะตัะตัะพะดะธั ะฒ ะฝะพัั..."
    โ  "๐ธ ะะฐะณััะทะธ ัะพัะพ ะดะปั ััะพะน ััะตะฝั!"
    โ
    โโ ะะพะปัะทะพะฒะฐัะตะปั ะทะฐะณััะถะฐะตั ัะพัะพ ะดะปั ะกัะตะฝั 2
    โ       โ
    โ   [ะกะะกะขะะะ]
    โ   - ะะฐะณััะถะฐะตั ะฝะฐ ImgBB
    โ   - ะกะพััะฐะฝัะตั URL ะฒ scene_image_urls[1]
    โ       โ
    โโ ะกะธััะตะผะฐ ะฟะพะบะฐะทัะฒะฐะตั ััะตะฝะฐัะธะน ะกัะตะฝั 3
    โ  "๐น ะกัะตะฝะฐ 3 ะธะท 3"
    โ  "๐ ะะฟะธัะฐะฝะธะต: ะทะฒัะทะดะฝะฐั ะฝะพัั..."
    โ  "๐ธ ะะฐะณััะทะธ ัะพัะพ ะดะปั ััะพะน ััะตะฝั!"
    โ
    โโ ะะพะปัะทะพะฒะฐัะตะปั ะทะฐะณััะถะฐะตั ัะพัะพ ะดะปั ะกัะตะฝั 3
    โ       โ
    โ   [ะกะะกะขะะะ]
    โ   - ะะฐะณััะถะฐะตั ะฝะฐ ImgBB
    โ   - ะกะพััะฐะฝัะตั URL ะฒ scene_image_urls[2]
    โ   - ะัะต ัะพัะพ ะทะฐะณััะถะตะฝั! โ
    โ       โ
    โโ ะกะธััะตะผะฐ ะฟะพะบะฐะทัะฒะฐะตั ััะตะฝั ะดะปั ะฟะพะดัะฒะตัะถะดะตะฝะธั:
    โ  "๐ฌ ะกัะตะฝะฐ 1 ะธะท 3"
    โ  "๐ ะัะพะผั: ะทะฐะบะฐั ั ะฟัะธัะฐะผะธ..."
    โ  "๐ธ ะคะพัะพ: [https://ibb.co/xxxxx]"
    โ  "[โ ะะฐะปะตะต] [โ๏ธ ะะตะดะฐะบัะธัะพะฒะฐัั]"
    โ
    โโ ะะพะปัะทะพะฒะฐัะตะปั ะฝะฐะถะธะผะฐะตั โ ะธะปะธ โ๏ธ ัะตะดะฐะบัะธััะตั
    โ  (ะะพะถะตั ัะตะดะฐะบัะธัะพะฒะฐัั ะฟัะพะผั ะ/ะะะ ะทะฐะณััะถะฐัั ะฝะพะฒะพะต ัะพัะพ)
    โ
    โโ ะคะธะฝะฐะปัะฝะฐั ะณะตะฝะตัะฐัะธั ะฒะธะดะตะพ โ
```

## ๐ง ะขะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ ัะตะฐะปะธะทะฐัะธะธ

### 1. ะะพะฒะพะต ัะพััะพัะฝะธะต FSM

```python
text_photo_confirming_scene_photo = State()  # ะะฐะณััะทะบะฐ ัะพัะพ ะดะปั ะบะฐะถะดะพะน ััะตะฝั
```

### 2. ะะพะฒัะต ััะฝะบัะธะธ ะฒ `video_handler.py`

#### A. `start_text_photo_scene_generation()`

```python
async def start_text_photo_scene_generation(message, state, photo_file_ids):
    """
    ะะผะตััะพ ัะพะณะพ ััะพะฑั ะทะฐะณััะถะฐัั ะฒัะต ัะพัะพ ะฝะฐ ImgBB:

    1. ะะฑัะฐะฑะฐััะฒะฐะตั ะฟัะพะผั ัะตัะตะท GPT-4
    2. ะกะพะทะดะฐะตั ััะตะฝั (ะบะพะปะธัะตััะฒะพ = ะบะพะปะธัะตััะฒั ัะพัะพ)
    3. ะะฝะธัะธะฐะปะธะทะธััะตั ะฟัััะพะน ัะฟะธัะพะบ scene_image_urls
    4. ะะพะบะฐะทัะฒะฐะตั ะฟะตัะฒัั ััะตะฝั ะธ ะฟัะพัะธั ัะพัะพ
    """

    # ะะฝะธัะธะฐะปะธะทะธััะตะผ ะฟัััะพะน ัะฟะธัะพะบ
    scene_image_urls = [None] * len(scenes)

    # ะกะพััะฐะฝัะตะผ photo_file_ids (ะผะพะถะตั ะธัะฟะพะปัะทะพะฒะฐัััั ะฟะพะทะถะต)
    await state.update_data(
        scenes=scenes,
        scene_image_urls=scene_image_urls,
        photo_file_ids=photo_file_ids,
        current_scene_index=0
    )

    # ะะพะบะฐะทัะฒะฐะตะผ ะฟะตัะฒัั ััะตะฝั
    await show_text_photo_scene_for_photo_upload(message, state, 0)
```

#### B. `show_text_photo_scene_for_photo_upload()`

```python
async def show_text_photo_scene_for_photo_upload(message, state, scene_index):
    """
    ะะพะบะฐะทัะฒะฐะตั ะธะฝัะพัะผะฐัะธั ะพ ััะตะฝะต ะธ ะฟัะพัะธั ะทะฐะณััะทะธัั ัะพัะพ

    ะัะธะผะตั ัะพะพะฑัะตะฝะธั:
    ๐น ะกัะตะฝะฐ 1 ะธะท 3
    โโโโโโโโโโโโโโโโโโโโโโโโ

    ๐ ะะฟะธัะฐะฝะธะต:
        ะะฐะบะฐั ะฝะฐะด ะผะพัะตะผ ั ะฟัะธัะฐะผะธ...

    โฑ๏ธ  ะะปะธัะตะปัะฝะพััั: 5 ัะตะบ
    โโโโโโโโโโโโโโโโโโโโโโโโ
    ๐ธ ะะฐะณััะทะธ ัะพัะพ ะดะปั ััะพะน ััะตะฝั:
    (ะะดะฝะพ ัะพัะพ, ัะพัะผะฐั JPG/PNG)
    """

    # ะัะปะธ scene_index >= len(scenes):
    #   ะัะต ัะพัะพ ะทะฐะณััะถะตะฝั! ะะพะบะฐะทัะฒะฐะตะผ ะดะปั ะฟะพะดัะฒะตัะถะดะตะฝะธั

    # ะะฝะฐัะต:
    #   ะะตัะตัะพะดะธะผ ะฒ ัะพััะพัะฝะธะต text_photo_confirming_scene_photo
    #   ะะดะตะผ ะทะฐะณััะทะบะธ ัะพัะพ ะฟะพะปัะทะพะฒะฐัะตะปะตะผ
```

#### C. `process_text_photo_scene_photo()` - ะะฑัะฐะฑะพััะธะบ ัะพััะพัะฝะธั

```python
@router.message(VideoStates.text_photo_confirming_scene_photo)
async def process_text_photo_scene_photo(message, state):
    """
    ะะฑัะฐะฑะพัะบะฐ ะทะฐะณััะถะตะฝะฝะพะณะพ ัะพัะพ:

    1. ะะพะปััะฐะตั message.photo
    2. ะะฐะณััะถะฐะตั ะฝะฐ ImgBB ัะตัะตะท ImageUploader
    3. ะกะพััะฐะฝัะตั URL ะฒ scene_image_urls[scene_index]
    4. ะะตัะตัะพะดะธั ะบ ัะปะตะดัััะตะน ััะตะฝะต (ะธะปะธ ะบ ะฟะพะดัะฒะตัะถะดะตะฝะธั)
    """

    # ะะฐะณััะถะฐะตะผ ะฝะฐ ImgBB
    image_url = await uploader.process_telegram_photo(...)

    # ะกะพััะฐะฝัะตะผ
    scene_image_urls[scene_index] = image_url

    # ะะพะบะฐะทัะฒะฐะตะผ ัะปะตะดััััั ััะตะฝั
    await show_text_photo_scene_for_photo_upload(message, state, scene_index + 1)
```

### 3. ะกัััะบัััะฐ ะดะฐะฝะฝัั ะฒ FSM State

```javascript
{
    // ะัะฝะพะฒะฝัะต ะดะฐะฝะฝัะต
    "prompt": "ะัะฐัะธะฒัะน ะทะฐะบะฐั ะฝะฐะด ะผะพัะตะผ",
    "model": "kwaivgi/kling-v2.5-turbo-pro",
    "model_key": "kling",

    // ะกัะตะฝั (ัะพะทะดะฐะฝั GPT-4)
    "scenes": [
        {
            "id": 1,
            "prompt": "ะะฐะบะฐั ั ะฟัะธัะฐะผะธ...",
            "duration": 5,
            "aspect_ratio": "16:9",
            "atmosphere": "cinematic"
        },
        {
            "id": 2,
            "prompt": "ะะตัะตัะพะด ะฒ ะฝะพัั...",
            ...
        },
        {
            "id": 3,
            "prompt": "ะะฒัะทะดะฝะฐั ะฝะพัั...",
            ...
        }
    ],

    // ะคะพัะพ ะดะปั ะบะฐะถะดะพะน ััะตะฝั (ะทะฐะฟะพะปะฝัะตััั ะฟะพะพัะตัะตะดะฝะพ)
    "scene_image_urls": [
        "https://ibb.co/photo1",   // โ ะคะพัะพ ะดะปั ะกัะตะฝั 1
        "https://ibb.co/photo2",   // โ ะคะพัะพ ะดะปั ะกัะตะฝั 2
        "https://ibb.co/photo3"    // โ ะคะพัะพ ะดะปั ะกัะตะฝั 3
    ],

    // ะกะปัะถะตะฑะฝัะต ะฟะตัะตะผะตะฝะฝัะต
    "current_scene_index": 0,
    "waiting_for_scene_photo": True,
    "status_msg_id": 12345
}
```

### 4. ะะพะณะธัะพะฒะฐะฝะธะต

```
๐ฌ Text+Photo generation: 3 ัะพัะพ, ะผะพะดะตะปั kling
โณ ะะฑัะฐะฑะพัะบะฐ ะฟัะพะผัะฐ ะธ ัะพะทะดะฐะฝะธะต ััะตะฝ...
โ GPT ัะพะทะดะฐะป 3 ัะปัััะตะฝะฝัั ััะตะฝ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐น ะกัะตะฝะฐ 1 ะธะท 3
๐ ะะฟะธัะฐะฝะธะต: [ััะตะฝะฐัะธะน]
๐ธ ะะฐะณััะทะธ ัะพัะพ ะดะปั ััะพะน ััะตะฝั...
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ะคะพัะพ ััะตะฝั 1 ะทะฐะณััะถะตะฝะพ: https://ibb.co/photo1
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐น ะกัะตะฝะฐ 2 ะธะท 3
...
```

## โจ ะัะตะธะผััะตััะฒะฐ ะฝะพะฒะพะณะพ ะฟะพะดัะพะดะฐ

### 1. **ะะพะปะฝะฐั ััะฝะพััั**

- ะะพะปัะทะพะฒะฐัะตะปั ะฒะธะดะธั ะบะฐะบะพะน ะฟัะพะผั ะดะปั ะบะฐะบะพะณะพ ัะพัะพ โ
- ะกะธััะตะผะฐ ัะตัะบะพ ะทะฝะฐะตั ะบะฐะบะพะต ัะพัะพ ะดะปั ะบะฐะบะพะน ััะตะฝั โ

### 2. **ะะพะปััะฐั ะณะธะฑะบะพััั**

- ะะพะถะตั ะทะฐะณััะถะฐัั ัะพัะพ ะฒ ะปัะฑะพะผ ะฟะพััะดะบะต
- ะะพะถะตั ะผะตะฝััั ัะพัะพ ะดะปั ะบะฐะถะดะพะน ััะตะฝั ะฟัะธ ัะตะดะฐะบัะธัะพะฒะฐะฝะธะธ

### 3. **ะัััะธะน UX**

- ะะพัะฐะณะพะฒัะน ะฟัะพัะตัั: ััะตะฝะฐ โ ัะพัะพ โ ััะตะฝะฐ โ ัะพัะพ
- ะะพะปัะทะพะฒะฐัะตะปั ะฒัะตะณะดะฐ ะทะฝะฐะตั ะฝะฐ ะบะฐะบะพะผ ััะฐะฟะต ะฝะฐัะพะดะธััั

### 4. **ะะตะฝััะต ะพัะธะฑะพะบ**

- ะัะบะปััะตะฝั ะพัะธะฑะบะธ ะฒัะพะดะต "ะคะพัะพ 2 ะดะปั ะบะฐะบะพะน ััะตะฝั?"
- ะะฐะถะดะพะผั ัะพัะพ ัะพัะฝะพ ัะพะพัะฒะตัััะฒัะตั ะพะดะธะฝ ััะตะฝะฐัะธะน

## ๐ ะะฝัะตะณัะฐัะธั ั ัััะตััะฒัััะธะผ ะบะพะดะพะผ

### ะััะฐะตััั ะฑะตะท ะธะทะผะตะฝะตะฝะธะน:

- `VideoGenerator.enhance_prompt_with_gpt()` - ัะพะทะดะฐะฝะธะต ััะตะฝ
- `VideoGenerator.generate_multiple_scenes(scenes, scene_image_urls)` - ะณะตะฝะตัะฐัะธั ะฒะธะดะตะพ
- `ImageUploader.process_telegram_photo()` - ะทะฐะณััะทะบะฐ ะฝะฐ ImgBB
- `show_text_photo_scene_for_confirmation()` - ะฟะพะบะฐะท ะดะปั ะฟะพะดัะฒะตัะถะดะตะฝะธั
- ะะตะดะฐะบัะธัะพะฒะฐะฝะธะต ััะตะฝ - ะฟะพะปะฝะพัััั ัะพะฒะผะตััะธะผะพ โ

### ะะพะฒะพะต:

- `start_text_photo_scene_generation()` - ะพะฑัะฐะฑะพัะบะฐ ะฟะพ ััะตะฝะฐะผ
- `show_text_photo_scene_for_photo_upload()` - ะฟะพะบะฐะท ั ะฟัะพััะฑะพะน ะทะฐะณััะทะธัั ัะพัะพ
- `process_text_photo_scene_photo()` - ะพะฑัะฐะฑะพััะธะบ ะทะฐะณััะทะบะธ
- `text_photo_confirming_scene_photo` ัะพััะพัะฝะธะต

## ๐ ะัะธะผะตัั ัะพะพะฑัะตะฝะธะน ะฑะพัั

### ะะฅะะ

```
/start
โ ะัะฑะธัะฐะตั "๐ ะขะตะบัั+ะคะพัะพ"
โ ะัะฑะธัะฐะตั "๐ฌ Kling v2.5"
โ ะะธัะตั: "ะัะฐัะธะฒัะน ะทะฐะบะฐั, ะฝะฐัะธะฝะฐั ะดะฝะตะผ ะธ ะทะฐะบะฐะฝัะธะฒะฐั ะฝะพััั"
โ ะะฐะณััะถะฐะตั 3 ัะพัะพ
โ ะะธัะตั: /ะณะพัะพะฒะพ
```

### ะะซะฅะะ

```
[ะกะธััะตะผะฐ ะพะฑัะฐะฑะฐััะฒะฐะตั ะฟัะพะผั ัะตัะตะท GPT-4]

๐น ะกัะตะฝะฐ 1 ะธะท 3
โโโโโโโโโโโโโโโโโโโโโโโโ
๐ ะะฟะธัะฐะฝะธะต:
    ะะพะปะพัะพะน ะทะฐะบะฐั ะฝะฐัะธะฝะฐะตั ะพะบัะฐัะธะฒะฐัั ะฝะตะฑะพ ะฒ ะพัะฐะฝะถะตะฒัะต ัะพะฝะฐ.
    ะกัะฐะธ ะฟัะธั ะปะตััั ะฒะดะฐะปะตะบะต...

โฑ๏ธ  ะะปะธัะตะปัะฝะพััั: 5 ัะตะบ

โโโโโโโโโโโโโโโโโโโโโโโโ
๐ธ ะะฐะณััะทะธ ัะพัะพ ะดะปั ััะพะน ััะตะฝั:
(ะะดะฝะพ ัะพัะพ, ัะพัะผะฐั JPG/PNG)

[ะะพะปัะทะพะฒะฐัะตะปั ะทะฐะณััะถะฐะตั ัะพัะพ]

โ ะคะพัะพ ะดะปั ััะตะฝั 1 ะทะฐะณััะถะตะฝะพ!

๐น ะกัะตะฝะฐ 2 ะธะท 3
โโโโโโโโโโโโโโโโโโโโโโโโ
๐ ะะฟะธัะฐะฝะธะต:
    ะะฐะบะฐั ััะฐะฝะพะฒะธััั ะฑะพะปะตะต ะธะฝัะตะฝัะธะฒะฝัะผ, ะฝะตะฑะพ ะพะบัะฐัะธะฒะฐะตััั ะฒ ะบัะฐัะฝัะต
    ะธ ัะธะพะปะตัะพะฒัะต ัะพะฝะฐ. ะกะพะปะฝัะต ะพะฟััะบะฐะตััั ะบ ะณะพัะธะทะพะฝัั...

โฑ๏ธ  ะะปะธัะตะปัะฝะพััั: 5 ัะตะบ

โโโโโโโโโโโโโโโโโโโโโโโโ
๐ธ ะะฐะณััะทะธ ัะพัะพ ะดะปั ััะพะน ััะตะฝั:
(ะะดะฝะพ ัะพัะพ, ัะพัะผะฐั JPG/PNG)
```

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต ะฝะพะฒะพะณะพ ะฟะพัะพะบะฐ

### ะขะตัั 1: ะะฐะทะพะฒัะน ะฟะพัะพะบ ั 2 ััะตะฝะฐะผะธ

```
โ ะะฐะณััะถะฐะตั 2 ัะพัะพ
โ ะกะธััะตะผะฐ ะฟัะพัะธั ัะพัะพ ะดะปั ััะตะฝั 1
โ ะะฐะณััะถะฐะตั ัะพัะพ ะดะปั ััะตะฝั 1
โ ะกะธััะตะผะฐ ะฟัะพัะธั ัะพัะพ ะดะปั ััะตะฝั 2
โ ะะฐะณััะถะฐะตั ัะพัะพ ะดะปั ััะตะฝั 2
โ ะกะธััะตะผะฐ ะฟะพะบะฐะทัะฒะฐะตั ะดะปั ะฟะพะดัะฒะตัะถะดะตะฝะธั
โ ะะธะดะตะพ ะณะตะฝะตัะธััะตััั ััะฟะตัะฝะพ
```

### ะขะตัั 2: ะะตะดะฐะบัะธัะพะฒะฐะฝะธะต ะฟะพัะปะต ะทะฐะณััะทะบะธ

```
โ ะะพะปัะทะพะฒะฐัะตะปั ะฒะธะดะธั ััะตะฝั ั ัะพัะพ
โ ะะพะถะตั ะฝะฐะถะฐัั โ๏ธ ะะตะดะฐะบัะธัะพะฒะฐัั
โ ะะพะถะตั ะธะทะผะตะฝะธัั ะฟัะพะผั
โ ะะพะถะตั ะทะฐะณััะทะธัั ะฝะพะฒะพะต ัะพัะพ
โ ะัะต ะธะทะผะตะฝะตะฝะธั ัะพััะฐะฝััััั
```

### ะขะตัั 3: ะัะผะตะฝะฐ ะฟัะพัะตััะฐ

```
โ ะ ะฟัะพัะตััะต ะทะฐะณััะทะบะธ ะผะพะถะตั ะฝะฐะฟะธัะฐัั /ะพัะผะตะฝะฐ
โ ะกะธััะตะผะฐ ัะฑัะฐััะฒะฐะตั ะฒัะต ัะพััะพัะฝะธั
โ ะะพะทะฒัะฐัะฐะตััั ะฒ ะณะปะฐะฒะฝะพะต ะผะตะฝั
```

## ๐ ะะพะทะผะพะถะฝัะต ะฟัะพะฑะปะตะผั

### ะัะพะฑะปะตะผะฐ: "ะคะพัะพ ะฝะต ะทะฐะณััะถะฐะตััั"

**ะะตัะตะฝะธะต**:

- ะัะพะฒะตัะธัั ะดะพัััะฟะฝะพััั ImgBB API
- ะัะพะฒะตัะธัั IMGBB_API_KEY ะฒ .env
- ะัะพะฒะตัะธัั ัะฐะทะผะตั ัะพัะพ (ะฝะต ะฑะพะปะตะต 32MB)

### ะัะพะฑะปะตะผะฐ: "ะกะธััะตะผะฐ ะฝะต ะฟะพะบะฐะทัะฒะฐะตั ัะปะตะดััััั ััะตะฝั"

**ะะตัะตะฝะธะต**:

- ะัะพะฒะตัะธัั ััะพ state.update_data() ะฒัะฟะพะปะฝะตะฝะฐ
- ะัะพะฒะตัะธัั ััะพ transition ะฒ text_photo_confirming_scene_photo ะฟัะพะธะทะพัะตะป
- ะัะพะฒะตัะธัั ะปะพะณะธ (scene_index ะฝะต ะดะพะปะถะตะฝ ะฑััั None)

### ะัะพะฑะปะตะผะฐ: "ะคะพัะพ ะทะฐะณััะถะตะฝะฝะพะต, ะฝะพ ะฒ scene_image_urls ะฟัััะพ"

**ะะตัะตะฝะธะต**:

- ะัะพะฒะตัะธัั ััะพ scene_image_urls ะธะฝะธัะธะฐะปะธะทะธัะพะฒะฐะฝ ะบะฐะบ ัะฟะธัะพะบ
- ะัะพะฒะตัะธัั ััะพ ะธะฝะดะตะบั ะฒ ะดะธะฐะฟะฐะทะพะฝะต [0, len(scene_image_urls))
- ะัะพะฒะตัะธัั ััะพ state.update_data() ัะพััะฐะฝัะตั ะธะทะผะตะฝะตะฝะธั

## ๐ ะะตะทัะปััะฐั

ะขะตะฟะตัั ะฟะพะปัะทะพะฒะฐัะตะปะธ ะผะพะณัั:

- โ๏ธ ะขะพัะฝะพ ะทะฝะฐัั ะบะฐะบะพะต ัะพัะพ ะดะปั ะบะฐะบะพะน ััะตะฝั
- ๐ธ ะะฐะณััะถะฐัั ัะพัะพ ะฒ ะฟัะฐะฒะธะปัะฝะพะผ ะฟะพััะดะบะต
- ๐ ะะตะฝััั ัะพัะพ ะดะปั ะบะฐะถะดะพะน ััะตะฝั ะฝะตะทะฐะฒะธัะธะผะพ
- โ ะะพะปะฝะพัััั ะบะพะฝััะพะปะธัะพะฒะฐัั ะฟัะพัะตัั ะณะตะฝะตัะฐัะธะธ

ะกะธััะตะผะฐ ััะฐะปะฐ **ะฑะพะปะตะต ะธะฝััะธัะธะฒะฝะพะน ะธ ะฟะพะฝััะฝะพะน**! ๐
